---
import "../../../components/universal/TimeAgo.web.js";
import "../../../components/universal/TimeDurationNarrative.web.js";
import { routes, Route, routeWsEditorTarget } from "../../../lib/native/route";

export interface Props {
  readonly route: Route<any, any>;
}

const { route } = Astro.props;
const r = routes(Astro, route);
const provenance = route?.provenance;
const healthJSON = r.uaObservabilityContent("/health.json");
const latestGitCommitsJSON = r.uaObservabilityContent("/git/latest-commit.json");
const wsEditorTarget = routeWsEditorTarget(route);
---
<!-- https://www.hyperui.dev/components/marketing/footers#component-10 -->
<footer id="prime" aria-label="Site Footer" class="bg-white mt-auto ring-1 ring-slate-900/10" data-observability-health-jpath={healthJSON} data-observability-git-latest-commit-jpath={latestGitCommitsJSON}>
  <div class="mx-auto max-w-screen-xl px-4 pt-4 pb-6 sm:px-6 lg:px-8 lg:pt-4">
    <div class="grid grid-cols-1 gap-8 lg:grid-cols-3">
      <div>
        <div class="flex justify-center text-teal-600 sm:justify-start">
          <img src={r.uaAssetURL.brand("/netspective/netspective-logo-full-259x84.jpg")}/>
        </div>
        <p id="inspection-state" class="mx-auto mt-6 max-w-md text-center leading-relaxed text-gray-500 sm:mx-0 sm:max-w-xs sm:text-left">
          Lorem ipsum dolor, sit amet consectetur adipisicing elit. Incidunt
          consequuntur amet culpa cum itaque neque.
        </p>        
      </div>

      <div class="grid grid-cols-1 gap-8 sm:grid-cols-2 md:grid-cols-4 lg:col-span-2">
        <div class="text-center sm:text-left">
          <p class="text-lg font-medium text-gray-900">About Us</p>

          <nav aria-label="Footer About Nav" class="mt-8">
            <ul class="space-y-4 text-sm">
              <li>
                <a class="text-gray-700 transition hover:text-gray-700/75" href={r.uaFlexibleURL('/gpm/medigy/purpose-mission-vision/executive-summary/')} target="_blank">
                  Purpose, Mission &amp; Vision
                </a>
              </li>

              <li>
                <a class="text-gray-700 transition hover:text-gray-700/75" href="/">
                  Meet the Team
                </a>
              </li>

              <li>
                <a class="text-gray-700 transition hover:text-gray-700/75" href="/">
                  Employee Handbook
                </a>
              </li>
            </ul>
          </nav>
        </div>

        <div class="text-center sm:text-left">
          <p class="text-lg font-medium text-gray-900">BZO Services</p>

          <nav aria-label="Footer Services Nav" class="mt-8">
            <ul class="space-y-4 text-sm">
              <li>
                <a class="text-gray-700 transition hover:text-gray-700/75" href="https://dqa.bzo.medigy.com/" target="_blank" title="Data Quality Admin" target="_blank">DQA</a>
                &middot;
                <a class="text-gray-700 transition hover:text-gray-700/75" href="https://cqa.bzo.medigy.com/" target="_blank" title="Data Quality Admin" target="_blank">CQA</a>
              </li>

              <li>
                <a class="text-gray-700 transition hover:text-gray-700/75" href="https://ml.infra.medigy.com/admin" target="_blank">Listmonk</a>
                &middot;
                <a class="text-gray-700 transition hover:text-gray-700/75" href="https://www.useplunk.com/" target="_blank">Plunk</a>
                &middot;
                <a class="text-gray-700 transition hover:text-gray-700/75" href="https://jbms.infra.medigy.com/business-central/" target="_blank">jBPM</a>
              </li>

              <li>
                <a class="text-gray-700 transition hover:text-gray-700/75" href="https://ffcrm.bzo.medigy.com/" target="_blank">FFCRM</a>
              </li>

              <li>
                <a class="text-gray-700 transition hover:text-gray-700/75" href="https://read.netspective.com/" target="_blank">Miniflux</a>
                &middot;
                <a class="text-gray-700 transition hover:text-gray-700/75" href={r.uaFlexibleURL('/www.medigy.com-hdo-ilo/')} target="_blank">Medigy HDO ILO</a>

              </li>

              <li>
                <a class="text-gray-700 transition hover:text-gray-700/75" href="https://analytics.google.com/" target="_blank">Google Analytics</a>
                &middot;
                <a class="text-gray-700 transition hover:text-gray-700/75" href="https://clarity.microsoft.com/" target="_blank">Clarity</a>
              </li>

              <li>
                <a class="text-gray-700 transition hover:text-gray-700/75" href="https://data.govn.netspective.com/" target="_blank">Data Governance</a>
              </li>
              <li>
                <a class="text-gray-700 transition hover:text-gray-700/75" href="https://bzo.netspective.com/email-center/" target="_blank">BZO E-mail Center</a>
              </li>
            </ul>
          </nav>
        </div>

        <div class="text-center sm:text-left">
          <p class="text-lg font-medium text-gray-900">Helpful Links</p>

          <nav aria-label="Footer Helpful Nav" class="mt-8">
            <ul class="space-y-4 text-sm">
              <li>
                <a class="text-gray-700 transition hover:text-gray-700/75" href="/">
                  FAQs
                </a>
              </li>

              <li>
                <a class="text-gray-700 transition hover:text-gray-700/75" href="/">
                  Support
                </a>
              </li>

              <li>
                <a class="group flex justify-center gap-1.5 sm:justify-start" href="https://teams.microsoft.com/l/meetup-join/19:meeting_OTFmZDdmY2ItMTg3NC00N2U2LWEzYzUtNmZkMjdkMGYyZDcx@thread.v2/0?context=%7B%22Tid%22:%22c82dd0b5-78de-4e84-b411-1cfc79f87740%22,%22Oid%22:%2247163847-656a-4f9c-a69c-bec258a6e085%22%7D" target="_blank">
                  <span class="text-gray-700 transition group-hover:text-gray-700/75">
                    <svg xmlns="http://www.w3.org/2000/svg" x="0px" y="0px" style="display: inline;" width="16" height="16" viewBox="0 0 48 48">
                      <path fill="#5059c9" d="M44,22v8c0,3.314-2.686,6-6,6s-6-2.686-6-6V20h10C43.105,20,44,20.895,44,22z M38,16	c2.209,0,4-1.791,4-4c0-2.209-1.791-4-4-4s-4,1.791-4,4C34,14.209,35.791,16,38,16z"></path><path fill="#7b83eb" d="M35,22v11c0,5.743-4.841,10.356-10.666,9.978C19.019,42.634,15,37.983,15,32.657V20h18	C34.105,20,35,20.895,35,22z M25,17c3.314,0,6-2.686,6-6s-2.686-6-6-6s-6,2.686-6,6S21.686,17,25,17z"></path><circle cx="25" cy="11" r="6" fill="#7b83eb"></circle><path d="M26,33.319V20H15v12.657c0,1.534,0.343,3.008,0.944,4.343h6.374C24.352,37,26,35.352,26,33.319z" opacity=".05"></path><path d="M15,20v12.657c0,1.16,0.201,2.284,0.554,3.343h6.658c1.724,0,3.121-1.397,3.121-3.121V20H15z" opacity=".07"></path><path d="M24.667,20H15v12.657c0,0.802,0.101,1.584,0.274,2.343h6.832c1.414,0,2.56-1.146,2.56-2.56V20z" opacity=".09"></path><linearGradient id="DqqEodsTc8fO7iIkpib~Na_zQ92KI7XjZgR_gr1" x1="4.648" x2="23.403" y1="14.648" y2="33.403" gradientUnits="userSpaceOnUse"><stop offset="0" stop-color="#5961c3"></stop><stop offset="1" stop-color="#3a41ac"></stop></linearGradient><path fill="url(#DqqEodsTc8fO7iIkpib~Na_zQ92KI7XjZgR_gr1)" d="M22,34H6c-1.105,0-2-0.895-2-2V16c0-1.105,0.895-2,2-2h16c1.105,0,2,0.895,2,2v16	C24,33.105,23.105,34,22,34z"></path><path fill="#fff" d="M18.068,18.999H9.932v1.72h3.047v8.28h2.042v-8.28h3.047V18.999z"></path>
                    </svg> MS Teams
                  </span>

                  <span class="relative -mr-2 flex h-2 w-2">
                    <span
                      class="absolute inline-flex h-full w-full animate-ping rounded-full bg-teal-400 opacity-75"
                    ></span>
                    <span
                      class="relative inline-flex h-2 w-2 rounded-full bg-teal-500"
                    ></span>
                  </span>
                </a>
              </li>
            </ul>
          </nav>
        </div>

        <div class="text-center sm:text-left">
          <p class="text-lg font-medium text-gray-900">Contact Us</p>

          <ul class="mt-8 space-y-4 text-sm">
            <li>
              <a class="flex items-center justify-center gap-1.5 sm:justify-start" href="/">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-5 w-5 shrink-0 text-gray-900"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M3 8l7.89 5.26a2 2 0 002.22 0L21 8M5 19h14a2 2 0 002-2V7a2 2 0 00-2-2H5a2 2 0 00-2 2v10a2 2 0 002 2z"
                  />
                </svg>

                <span class="text-gray-700">bzo@netspective.com</span>
              </a>
            </li>

            <li>
              <a class="flex items-center justify-center gap-1.5 sm:justify-start" href="/">
                <svg
                  xmlns="http://www.w3.org/2000/svg"
                  class="h-5 w-5 shrink-0 text-gray-900"
                  fill="none"
                  viewBox="0 0 24 24"
                  stroke="currentColor"
                  stroke-width="2"
                >
                  <path
                    stroke-linecap="round"
                    stroke-linejoin="round"
                    d="M3 5a2 2 0 012-2h3.28a1 1 0 01.948.684l1.498 4.493a1 1 0 01-.502 1.21l-2.257 1.13a11.042 11.042 0 005.516 5.516l1.13-2.257a1 1 0 011.21-.502l4.493 1.498a1 1 0 01.684.949V19a2 2 0 01-2 2h-1C9.716 21 3 14.284 3 6V5z"
                  />
                </svg>

                <span class="text-gray-700">+1 202-681-7862</span>
              </a>
            </li>

            <li class="flex items-start justify-center gap-1.5 sm:justify-start">
              <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5 shrink-0 text-gray-900" fill="none" viewBox="0 0 24 24" stroke="currentColor" stroke-width="2">
                <path stroke-linecap="round" stroke-linejoin="round" d="M17.657 16.657L13.414 20.9a1.998 1.998 0 01-2.827 0l-4.244-4.243a8 8 0 1111.314 0z" />
                <path stroke-linecap="round" stroke-linejoin="round" d="M15 11a3 3 0 11-6 0 3 3 0 016 0z" />
              </svg>

              <address class="-mt-0.5 not-italic text-gray-700">
                Silver Spring, Maryland USA
              </address>
            </li>
          </ul>
        </div>
      </div>
    </div>

    <div class="mt-12 border-t border-gray-100 pt-6">
      <div class="text-center sm:flex sm:justify-between sm:text-left">
        <p class="text-sm text-gray-500">
          <span class="block sm:inline">{
            provenance?.originFsPath 
              ? (provenance.entry
                  ? (wsEditorTarget ? <span title={String(provenance.originFsPath)}><a href={wsEditorTarget.editableTargetURI}>{provenance.collection}/{provenance.entry.id}</a></span> : <span title={String(provenance.originFsPath)}>{provenance.collection}/{provenance.entry.id}</span>)
                  : (wsEditorTarget ? <span title="Open in Workspace Editor"><a href={wsEditorTarget.editableTargetURI}>{provenance.originFsPath}</a></span> : provenance.originFsPath)) 
              : <em>no route.provenance.originFsPath provided</em>}
          </span>
          <span>&middot;</span>
          <a class="inline-block text-teal-600 underline transition hover:text-teal-600/75" href="/">
            Terms & Conditions
          </a>

          <span>&middot;</span>

          <a class="inline-block text-teal-600 underline transition hover:text-teal-600/75" href="/">
            Privacy Policy
          </a>
        </p>

        <p class="mt-4 text-sm text-gray-500 sm:order-first sm:mt-0">
          &copy; 1997-<script is:inline>document.write( new Date().getFullYear() );</script> Netspective Communications LLC. All rights reserved.
        </p>
      </div>
    </div>
  </div>
</footer>

<script is:inline>
  async function health() {
    const inspStateElem = document.querySelector('footer#prime p#inspection-state');
    const ojPathDataSetElem = document.querySelector('footer#prime');
    if(ojPathDataSetElem) {
      const health = await fetch(ojPathDataSetElem.dataset.observabilityHealthJpath).then(resp => resp.json());
      const dbConns = health.checks["dbConns"];
      let astro = health.checks["astro"];
      // if running in dev mode there won't be an "astro" build section in health.json so let's make one up
      if(!astro) astro = [{observedValue: new Date()}, {observedValue: new Date()}, {observedValue: "(dev?)"}];
      const gitCommit = await fetch(ojPathDataSetElem.dataset.observabilityGitLatestCommitJpath).then(resp => resp.json());
      inspStateElem.innerHTML = `     
        Built <b>${astro[2].observedValue}</b> pages <b><span is="time-ago" date="${astro[1].observedValue}"></span></b> in 
        <span is="time-duration" start="${astro[0].observedValue}" finish="${astro[1].observedValue}"></span>,
        <span title="${gitCommit.subject}">triggered by ${gitCommit.authorName} <span is="time-ago" date="${gitCommit.authorDate}"></span></span>
        (<a href="${ojPathDataSetElem.dataset.observabilityHealthJpath}">database ${dbConns[0].observedValue ? 'is configured from env' : 'is not configured in env'}</a>).
        <a href="https://git.netspective.io/precision-knowledge-content/knowledge-center/-/commits/main"><img alt="pipeline status" src="https://git.netspective.io/precision-knowledge-content/knowledge-center/badges/main/pipeline.svg"/></a>
      `;
    } else {
      inspStateElem.innerHTML = `originURL (attribute "data-observability-health-jpath") not supplied for footer`;
    }
  }

  document.addEventListener("DOMContentLoaded", health);
</script>
